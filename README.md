
Cycling Data Video Generator üö¥‚Äç‚ôÇÔ∏èüí®This project generates dynamic video overlays from cycling .tcx files. It provides both a desktop GUI and a web interface to load a TCX file, select a specific time range from the activity, and create an MP4 video displaying key metrics like power, heart rate, and watts per kilogram.The application is designed with a shared backend, ensuring that both the desktop and web interfaces use the same reliable logic for data parsing and video creation.‚ú® FeaturesTCX File Parsing: Efficiently parses standard .tcx (Training Center XML) files to extract workout data.Interactive Data Visualization: Plots the entire workout's power data, allowing users to easily zoom and pan to select the perfect segment.Dynamic Video Generation: Creates a high-quality MP4 video with animated data overlays for power, heart rate, and W/kg.Dual Interfaces: Choose the interface that works best for you:üñ•Ô∏è Desktop App: A native GUI built with PyQt6 for a responsive, local experience.üåê Web App: A modern web interface built with Flask and Plotly.js for easy access from any browser.Asynchronous Processing: Video generation runs in a background thread to keep the user interface responsive.Shared Core Logic: A centralized backend (backend_logic.py, gauge_generator.py) ensures consistent behavior across both front-ends.üñºÔ∏è ScreenshotsHere's a quick look at the two application interfaces and the kind of video output you can expect.Desktop Application (PyQt6)The desktop app provides a simple 3-step process: load your file, select a time range on the graph, and generate the video.``Web Application (Flask)The web app offers the same functionality entirely within your browser, with a clean and modern UI.``Sample Video OutputThe generated video displays your cycling metrics with a custom font and animated icons.``üõ†Ô∏è Technology StackBackend: PythonCore Libraries:Flask: For the web server and API.lxml: For high-performance XML/TCX parsing.NumPy: For numerical operations and data interpolation.OpenCV-Python: For video frame composition and encoding.Pillow (PIL): For drawing text and manipulating images.Desktop UI: PyQt6, pyqtgraphWeb UI: HTML, CSS, JavaScript, Plotly.jsüìÇ Project StructureThe project is organized with a clear separation between the UI, backend logic, and video generation components..
‚îú‚îÄ‚îÄ app.py              # Flask web application entrypoint and API.
‚îú‚îÄ‚îÄ app_ui.py           # PyQt6 desktop application UI definition and logic.
‚îú‚îÄ‚îÄ backend_logic.py    # Core logic: TCX parsing and data slicing. (Shared)
‚îú‚îÄ‚îÄ gauge_generator.py  # Video frame generation and encoding logic. (Shared)
‚îú‚îÄ‚îÄ graph_widget.py     # Custom pyqtgraph widget for the desktop app.
‚îú‚îÄ‚îÄ main.py             # Main entrypoint to launch the PyQt6 desktop app.
‚îú‚îÄ‚îÄ requirements.txt    # Python package dependencies.
‚îî‚îÄ‚îÄ templates/
    ‚îî‚îÄ‚îÄ index.html      # Single-page HTML file for the Flask web UI.
üöÄ Getting StartedFollow these steps to set up and run the project on your local machine.1. PrerequisitesPython 3.8 or newer.2. InstallationFirst, clone the repository to your local machine:git clone <your-repository-url>
cd GUIapplicatioon
Next, create and activate a virtual environment. This keeps the project's dependencies isolated.On macOS/Linux:python3 -m venv venv
source venv/bin/activate
On Windows:python -m venv venv
.\venv\Scripts\activate
Finally, install all the required packages from requirements.txt:pip install -r requirements.txt
3. Running the ApplicationYou can run either the desktop or the web application.To Run the Desktop App:Execute the main.py script:python main.py
The PyQt6 application window will appear.To Run the Web App:Execute the app.py script:python app.py
Then, open your web browser and navigate to: https://www.google.com/search?q=http://127.0.0.1:5000‚öôÔ∏è How It WorksData Ingestion: The user uploads a .tcx file through either the desktop or web UI.Parsing (backend_logic.py): The lxml library parses the XML file to extract trackpoints (time, power, heart rate, cadence, etc.) into a structured format.Visualization & Range Selection: The power data is plotted on a graph (pyqtgraph for desktop, Plotly.js for web). The user can zoom and pan to select a specific time segment for the video.Orchestration (orchestrate_video_generation in backend_logic.py): This central function manages the video creation process. It runs in a background thread to keep the UI responsive.Frame Generation (gauge_generator.py):The selected data segment is interpolated using NumPy to create a smooth data point for every single frame of the output video (e.g., at 30 FPS).For each frame, Pillow and OpenCV are used to draw the text, icons, and data values onto a blank image.Caching is used to optimize performance by reusing rendered text images (e.g., "250W") instead of redrawing them for every frame.Video Encoding: The generated frames are compiled into a final MP4 video file using OpenCV's VideoWriter.Completion: The user is notified, and a download link is provided (in the web UI) or a success message is shown (in the desktop UI).